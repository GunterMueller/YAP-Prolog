#
# default base directory for YAP installation
# (EROOT for architecture-dependent files)
#
prefix = @prefix@
ROOTDIR = $(prefix)
EROOTDIR = @exec_prefix@
#
# where the binary should be
#
BINDIR = $(ROOTDIR)/bin
#
# where YAP should look for libraries
#
LIBDIR=$(ROOTDIR)/lib/Yap
#
# where YAP should look for architecture-independent Prolog libraries
#
SHAREDIR=$(ROOTDIR)/share/Yap
#
#
CC=@CC@
CFLAGS= @CFLAGS@ $(YAP_EXTRAS) $(DEFS) -I$(srcdir) -I../.. -I$(srcdir)/../../include
#
#
# You shouldn't need to change what follows.
#
INSTALL=@INSTALL@
INSTALL_DATA=@INSTALL_DATA@
INSTALL_PROGRAM=@INSTALL_PROGRAM@
SHELL=/bin/sh
RANLIB=@RANLIB@
srcdir=@srcdir@
SHLIB_CFLAGS=@SHLIB_CFLAGS@
SHLIB_SUFFIX=@SHLIB_SUFFIX@
CPLINT_CFLAGS=@CPLINT_CFLAGS@
CPLINT_LDFLAGS=@CPLINT_LDFLAGS@
CPLINT_LIBS=@CPLINT_LIBS@
#4.1VPATH=@srcdir@:@srcdir@/OPTYap
CWD=$(PWD)
#
OBS=cplint_yap.o cplint_Prob.o
SOBJS=cplint@SHLIB_SUFFIX@




CPLINT_SRCDIR = $(srcdir)

CPLINT_EXDIR = $(srcdir)/examples

CPLINT_DOCDIR = $(srcdir)/doc


CPLINT_PROGRAMS= \
	$(CPLINT_SRCDIR)/cplint.yap 

CPLINT_HELPER_PROGRAMS= \
	$(CPLINT_SRCDIR)/test.yap \
	$(CPLINT_SRCDIR)/semantics.yap
CPLINT_EXAMPLES= \
	$(CPLINT_EXDIR)/dice.cpl \
	$(CPLINT_EXDIR)/dice.uni \
	$(CPLINT_EXDIR)/mendel.cpl \
	$(CPLINT_EXDIR)/alarm.cpl \
	$(CPLINT_EXDIR)/coin.cpl \
	$(CPLINT_EXDIR)/coin.uni \
	$(CPLINT_EXDIR)/coin2.cpl \
	$(CPLINT_EXDIR)/coin2.uni \
	$(CPLINT_EXDIR)/student.cpl \
	$(CPLINT_EXDIR)/student.uni \
	$(CPLINT_EXDIR)/esapprox.cpl \
	$(CPLINT_EXDIR)/esrange.cpl \
	$(CPLINT_EXDIR)/es.cpl \
	$(CPLINT_EXDIR)/school_simple.cpl \
	$(CPLINT_EXDIR)/school_simple.uni \
	$(CPLINT_EXDIR)/school.cpl \
	$(CPLINT_EXDIR)/paper_ref.cpl \
	$(CPLINT_EXDIR)/paper_ref_not.cpl \
	$(CPLINT_EXDIR)/paper_ref_simple.cpl \
	$(CPLINT_EXDIR)/threesideddice.cpl \
	$(CPLINT_EXDIR)/threesideddice.uni \
	$(CPLINT_EXDIR)/twosideddice.cpl \
	$(CPLINT_EXDIR)/female.cpl

CPLINT_DOCS=\
	$(CPLINT_DOCDIR)/bib.bib \
	$(CPLINT_DOCDIR)/manual.tex
	

all: $(SOBJS)

cplint_yap.o: $(srcdir)/cplint_yap.c  $(srcdir)/cplint.h 
	$(CC) -c $(CFLAGS) $(SHLIB_CFLAGS) $(CPLINT_CFLAGS) $(srcdir)/cplint_yap.c -o cplint_yap.o

cplint_Prob.o: $(srcdir)/cplint_Prob.c  $(srcdir)/cplint.h 
	$(CC) -c $(CFLAGS) $(SHLIB_CFLAGS) $(CPLINT_CFLAGS) $(srcdir)/cplint_Prob.c -o cplint_Prob.o
	


@DO_SECOND_LD@cplint@SHLIB_SUFFIX@: cplint_yap.o cplint_Prob.o
@DO_SECOND_LD@	@CPLINT_SHLIB_LD@ -o cplint@SHLIB_SUFFIX@ $(CPLINT_LDFLAGS) cplint_yap.o cplint_Prob.o $(CPLINT_LIBS) 


install: all 
	mkdir -p $(DESTDIR)$(SHAREDIR)/cplint
	mkdir -p $(DESTDIR)$(SHAREDIR)/cplint/examples
	mkdir -p $(DESTDIR)$(SHAREDIR)/cplint/doc
	for h in $(CPLINT_PROGRAMS); do $(INSTALL_DATA) $$h $(DESTDIR)$(SHAREDIR); done
	for h in $(CPLINT_EXAMPLES); do $(INSTALL_DATA) $$h $(DESTDIR)$(SHAREDIR)/cplint/examples; done
	for h in $(CPLINT_DOCS); do $(INSTALL_DATA) $$h $(DESTDIR)$(SHAREDIR)/cplint/doc; done
	for h in $(CPLINT_HELPER_PROGRAMS); do $(INSTALL_DATA) $$h $(DESTDIR)$(SHAREDIR)/cplint; done
	$(INSTALL_PROGRAM) $(SOBJS) $(DESTDIR)$(LIBDIR)

installcheck: 
	yap -l $(DESTDIR)$(SHAREDIR)/cplint/test.yap
	
