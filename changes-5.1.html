<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
        "http://www.w3.org/TR/1999/REC-html401-19991224/strict.dtd">

<html>

<head>
	<title>YAP change log</title>
	<link rel=stylesheet href="changes.css" type="text/css">
</head>

<body>

<hr>

<h1>Changes in YAP-5.1</h1>

<h2>Yap-5.1.0:</h2>
<ul>
<li> NEW: tabling does not conflit with depth limit (Trevor Walker). </li>
<li> NEW: make scanner restartable on seekable files (Nuno Fonseca). </li>
<li> NEW: improve error discovery within scanner (Jude Shavlik). </li>
<li> NEW: change event profiler to do profiling online and
off-line. </li>
<li> NEW: routine to find clause/pred </li>
<li> NEW: always end clauses with Ystop START, so that we can refer
back to the clause's beginning. </li>
<li> NEW: always have a pointer to Pred in clauses, so that we can
find current predicate. </li>
<li> NEW: heapgc should now be concurrent when using threads. </li>
<li> FIXED: heapgc wo tags can handle trail overflows right. </li>
<li> NEW: heapgc wo tags does not write on the collected areas during marking. </li>
<li> FIXED: dif/2 might get into trouble restoring assignments to
attributes. </li>
<li> NEW: Yap_DebugPlWrite and Yap_DebugErrorPutc for those debugging
moments. </li>
<li> FIXED: get rid of dead internal variable MutableList. </li>
<li> NEW: write_depth/3 for very large compound terms. </li>
<li> FIXED: new bug in garbage collection. </li>
<li> FIXED: overflow handling in DB/AttVars was resetting old var, and
  wasn't resetting trail. </li>
<li> FIXED: when rebuilding DB term with attvars, set global var to
  point to attvar. </li>
<li> NEW: add school CLP(BN) example. </li>
<li> NEW: add sc CLP(BN) example. </li>
<li> FIXED: make exception port more like a true port. </li>
<li> FIXED: don't run ^ in setof if there are no excess variables. </li>
<li> FIXED: prolog_load_context(directory) relied on dead code. </li>
<li> FIXED: some small beautifications for system/1, getcwd/1, sh/1, rename/2. </li>
<li> NEW: operating_system_error. </li>
<li> FIXED: Restore could not recover DL_MALLOC info and was not recovering
DBTerms correctly. </li>
<li> FIXED: with locking field, AtomNil and friends might not be
aligned, and would be confused with int. </li>
<li> FIXED: variables should always be reset when doing trail
expansion from the parser, even if there is no shifting (obs Trevor
Walker). </li>
<li> FIXED: growglobal with realloc was broken. </li>
<li> FIXED: with threads, self-deadlocking in new array codes. </li>
<li> FIXED: in tabling, use malloc when AllocCodeSpace fails. </li>
<li> FIXED: in tabling don't look inside cp_ap == NULL and fix recent
  bug in walking dependency frames. </li>
<li> FIXED: with tabling ASP sometimes was miscalculated, causing
  trouble with stack shifter (obs Kostis Sagonas). </li>
<li> FIXED: ~D should print bignums (obs Jude Shavlik). </li>
<li> FIXED: format's ~d and ~D were broken (obs Jude Shavlik). </li>
<li> FIXED: profiler should not talk about hidden predicates or idb entries. </li>
<li> FIXED: recentg change in setof could bind argument (obs
  Jude Shavlik). </li>
<li> FIXED: EOF (-1) at debugger prompt would generate exception (obs
  Jude Shavlik). </li>
<li> FIXED: ^C was very broken: break was not accepted, and debug,
trace and statistics did not work at all (obs Jude Shavlik). </li>
<li> FIXED: format_has_tabs could miss tab signs (obs Jude Shavlik). </li>
<li> FIXED: plug holes in memory allocation from scanner (obs
Mark Goadrich). </li>
<li> FIXED: instrument memory allocation when using system malloc. </li>
<li> FIXED: adjust_cp_hbs was readjusting consumer choice-points (it
  can only adjust hb once) (obs Remko Troncon). </li>
<li> FIXED: try to make GC trace message "marked  N vars" intelligible. </li>
<li> FIXED: garbage collection of mabindings was broken with tabling
(obs Remko Troncon). </li>
<li> FIXED: did not initialise tabling variables
(obs Remko Troncon). </li>
<li> FIXED: should have meta-predicate definitions for calls and
discontiguous. </li>
<li> FIXED: have discontiguous as a builtin, not just as a
  declaration (obs Jude Shavlik). </li>
<li> FIXED: if first argument was unbound, comparisons might be
  called with second argument undereferenced!! </li>
<li> FIXED: strip ^ before doing execute in setof or bagof. </li>
<li> FIXED: use CONST declarations in interface (thanks to Roberto Bagnara). </li>
<li> FIXED: absmi should consult PREG, not P (obs Remko Troncon). </li>
<li> FIXED: bad init in tabling code. </li>
<li> FIXED: YAP_MkBigIntTerm was broken (obs Roberto Bagnara). </li>
<li> NEW: update documentation to support new CLP(R) and CHR packages. </li>
<li> FIXED: regression in clpbn/utils.yap. </li>
<li> NEW: put_attrs/2. </li>
<li> FIXED: don't install CLP unless coroutining && rational trees are
  active. </li>
<li> FIXED: syntax error in ypp.yap (obs Paulo Moura). </li>
<li> FIXED: save/restore should be as usual if using YAP allocation. </li>
<li> FIXED: save/restore FZ regs. </li>
<li> FIXED: $loop_stream could be defined early in boot process. </li>
<li> NEW: make rational trees default. </li>
<li> NEW: make enable-max-memory default. </li>
<li> FIXED: allow people to disable indexing (obs Ricardo Lopes). </li>
<li> FIXED: make undefined exception more ISO like (obs Paulo Moura). </li>
<li> FIXED: add missing dependency in chr's Makefile.in. </li>
<li> FIXED: fix corruption in ypp.yap. </li>
<li> FIXED: ~@ makes format a meta-predicate. </li>
<li> FIXED: format should do immediate exit on exception (from Prolog call). </li>
<li> FIXED: make format reentrant and thread-safe (format may call itself). </li>
<li> FIXED: don't complain if a module is loading a reexported
  predicate and the original predicate. </li>
<li> FIXED: change a few defaults for SWI compatibility. </li>
<li> FIXED: library prandom was broken (obs Nuno Fonseca). </li>
<li> NEW: add max_tagged_integer and min_tagged_inter prolog_flags. </li>
<li> NEW: add ~@ option to format. </li>
<li> NEW: memberchk/2 is like builtin in SWI emulation lib. </li>
<li> NEW: SWI like prolog_source_location/2 </li>
<li> FIXED: $loop_stream usage was broken. Fix $fetch_stream_alias to
  be bidirectional.</li>
<li> FIXED: allow nb_set followed by b_set, bheakkkk! The other way round
is still not allowed.</li>
<li> NEW: from SWI maplist/2, maplist/3, maplist/4.</li>
<li> NEW: call/2, call/3, call/4.</li>
<li> FIXED: disable mutables in SWI mode. </li>
<li> FIXED: safe C-preds should always use P when calling garbage
       collector, aarrggh :-(, CP use found in GetTermFromArray.</li>
<li> NEW: SWI-like ord_empty/1 and ord_memberchk/2 in library(ordsets).</li>
<li> FIXED: safe call_c should check for signals before calling a built-in.</li>
<li> NEW: -p option allows setting path from command line.</li>
<li> FIXED: during grow, heap references should not be followed from trail.</li>
<li> FIXED: \= was not resetting wakeups correctly.</li>
<li> FIXED: copy_term was broken if attrs were an unbound variable.</li>
<li> FIXED: during garbage collection, heap references should be
  copied to trail, and that's it.</li>
<li> FIXED: excessive backtracking in multifile declaration.</li>
<li> NEW: allow style_check(singleton) and style_check(-singleton).</li>
<li> NEW: SWI module now makes atom_concat/{2,3} behave like atomic_concat/{2,3}.</li>
<li> NEW: add SWI-like copy_term_nat/2.</li>
<li> NEW: add SWI-like get_time and convert_time, but using integers, not floats.</li>
<li> NEW: add SWI-like working_directory/2 and chdir/2.</li>
<li> NEW: add append/3 and member/2 to SWI module.</li>
<li> FIXED: use bootstrap/1 to load up system.</li>
<li> FIXED: use_module/3 did not get info on loaded_module.</li>
<li> NEW:  use_load_files as main file loading option.</li>
<li> FIXED:  broken do_print_message for defined_elsewhere.</li>
<li> FIXED:  debugger option.</li>
<li> FIXED: trace through undefined predicates correctly.</li>
<li> FIXED: WIN32 missing include files (untested)</li>
<li> FIXED: -L trouble (my thanks to Takeyuchi Shiramoto-san)!</li>
<li> FIXED: debugging of backtrable user-C preds would core dump.</li>
<li> FIXED: redeclaring a C-predicate as Prolog core dumps.</li>
<li> FIXED: badly protected  YapInterface.h.</li>
<li> FIXED: break/0 was failing at exit.</li>
<li> FIXED: YAP_cut_fail and YAP_cut_succeed were different from manual.</li>
<li> FIXED: tracing through data-bases could core dump.</li>
<li> FIXED: cut could break on very large computations.</li>
<li> FIXED: first pass at BigNum issues (obs Roberto Bagnara).</li>
<li> FIXED: debugger could get go awol after fail port.</li>
<li> FIXED: weird message on wrong debugger option.</li>
<li> FIXED: cases where restore/1 could break.</li>
<li> NEW:  SWI predicates now update prolog module</li>
<li> NEW:  port of Leslie's CLP(R) system.</li>
<li> NEW:  generations in garbage collector.</li>
<li> SPEEDUP:  optimise some garbage collector code.</li>
</ul>

<hr>

</body>

</html>
