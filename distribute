#/bin/bash
# Guess what: this code works for me!

version="Yap-5.1.0"
splat
cd C
splat
cd ../H
splat
cd ../BEAM
splat
cd ../OPTYap
splat
cd ../VC
splat
cd ../LGPL
splat
cd chr
splat
cd ../clpr
splat
cd ../clp
splat
cd ../JPL
splat
cd src
splat
cd ../java
splat
cd jpl
splat
cd fli
splat
cd ../../../../pillow
splat
cd examples
splat
cd  ../../../include
splat
#/bin/cp config.h config.h.mine
#/bin/cp ../../../bins/cyg/*.h .
#/bin/mv config.h.mine config.h
cd ../console
splat
cd ../docs
splat
if test "$1" = "--small"; then
  make realclean
else
  make html
  make pdf
  make clean
fi
cd ../include
splat
cd ../library
splat
cd regex
splat
cd ../yap2swi
splat
cd ../../misc
splat
cd ../pl
splat
cd ../CLPQR
splat
cd clpq
splat
cd ../clpqr
splat
cd examples
splat
cd SESSION
splat
cd ../monash
splat
cd ../../../clpr
splat
cd ../../CHR
splat
cd chr
splat
cd ../../CLPBN
splat
cd clpbn
splat
cd examples
splat
cd ../../../..
if test "$1" = "--small"; then
  tar cvzf  "$version"-small.tar.gz --exclude=CVS  "$version"/{Artistic,INSTALL,README*,changes*,config*,install-sh,Makefile.in,.depend.in,distribute,C,H,VC,console,docs,include,library,misc,pl,LGPL/README,LGPL/pillow/[C-Z]*,LGPL/pillow/*.pl,LGPL/pillow/doc/*info*,LGPL/JPL/jpl.yap,LGPL/JPL/jpl_paths.yap.in,LGPL/JPL/Makefile.in,LGPL/JPL/java,LGPL/JPL/src,build-distr,OPTYap,BEAM,LGPL/clpr,LGPL/chr,CLPBN} # --exclude=CLPQR/clpqr/examples  --exclude=CHR/chr/examples
else
  tar cvzf "$version".tar.gz --exclude=CVS  "$version"/{Artistic,INSTALL,README*,changes*,config*,install-sh,Makefile.in,.depend.in,distribute,C,H,VC,console,docs,include,library,misc,pl,LGPL/README,LGPL/pillow/[C-Z]*,LGPL/pillow/*.pl,LGPL/pillow/doc/*info*,LGPL/JPL/jpl.yap,LGPL/JPL/jpl_paths.yap.in,LGPL/JPL/Makefile.in,LGPL/JPL/java,LGPL/JPL/src,build-distr,build-distr,OPTYap,BEAM,LHPL/clpr,LGPL/chr,CLPBN,Logtalk}
fi
