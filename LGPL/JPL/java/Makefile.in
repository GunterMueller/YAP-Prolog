################################################################
# Build jpl.jar
################################################################

.SUFFIXES: .java .class

#
# default base directory for YAP installation
#
ROOTDIR = @prefix@
#
# where the binary should be
#
BINDIR = $(ROOTDIR)/bin
#
# where YAP should look for binary libraries
#
LIBDIR=$(ROOTDIR)/lib/Yap
#
# where YAP should look for architecture-independent Prolog libraries
#
SHAREDIR=$(ROOTDIR)/share
#
#
# You shouldn't need to change what follows.
#
INSTALL=@INSTALL@
INSTALL_DATA=@INSTALL_DATA@
INSTALL_PROGRAM=@INSTALL_PROGRAM@
SHELL=/bin/sh
RANLIB=@RANLIB@
srcdir=@srcdir@
SHLIB_CFLAGS=@SHLIB_CFLAGS@
SHLIB_SUFFIX=@SHLIB_SUFFIX@
#4.1VPATH=@srcdir@:@srcdir@/OPTYap
CWD=$(PWD)
#
JAVAC=@JAVAC@
JAR=@JAR@
JPL=jpl.jar

CLS=	jpl/Atom.java \
	jpl/Compound.java \
	jpl/Float.java \
	jpl/Integer.java \
	jpl/JBoolean.java \
	jpl/JPLException.java \
	jpl/JPL.java \
	jpl/JRef.java \
	jpl/JVoid.java \
	jpl/PrologException.java \
	jpl/Query.java \
	jpl/Term.java \
	jpl/Util.java \
	jpl/Variable.java \
	jpl/Version.java

FLI=	jpl/fli/atom_t.java \
	jpl/fli/BooleanHolder.java \
	jpl/fli/DoubleHolder.java \
	jpl/fli/engine_t.java \
	jpl/fli/fid_t.java \
	jpl/fli/functor_t.java \
	jpl/fli/IntHolder.java \
	jpl/fli/LongHolder.java \
	jpl/fli/module_t.java \
	jpl/fli/ObjectHolder.java \
	jpl/fli/PointerHolder.java \
	jpl/fli/predicate_t.java \
	jpl/fli/Prolog.java \
	jpl/fli/qid_t.java \
	jpl/fli/StringHolder.java \
	jpl/fli/term_t.java


JAVA=$(CLS) $(FLI)
CLASSES=$(JAVA:.java=.class)

all:	$(JPL)

$(JAVA):
	-@ ( cd jpl ; @LN_S@ $(srcdir)/jpl/*.java .)
	-@ ( cd jpl/fli ; @LN_S@ $(srcdir)/jpl/fli/*.java .)

$(JPL):	$(JAVA)
	$(JAVAC) $(JAVA)
	$(JAR) cf $(JPL) $(CLASSES)

clean::
	rm -f *~ $(CLASSES)

distclean: clean
	rm -r $(JPL)
install: $(JPL)
	mkdir -p $(DESTDIR)$(SHAREDIR)/Yap
	$(INSTALL_DATA) $(JPL) $(DESTDIR)$(SHAREDIR)/Yap

